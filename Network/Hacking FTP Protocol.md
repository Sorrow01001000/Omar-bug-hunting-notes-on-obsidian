![[Pasted image 20250201040843.png]]

![[Pasted image 20250201040953.png]]
ممكن يبقي علي الport 22 عادي وده الdefualt بس عادي ممكن الdev يغيره ويبقي 2221 مثلا وهكذا.

![[Pasted image 20250201041036.png]]
في حاله النقل وكدا ممكن الport يبقي مشغول فا ده الport البديل ليه وبيبقي في الactive mode.



![[Pasted image 20250201041154.png]]
ال active mode ده البيعمل الconnection بين الclient والserver.
والpassive mode ده عشان انت الclient فا عايز تعمل الحاجات دي عن بعد فا بتعملها بالpassive mode
الهوا تتحكم بالسيرفر وتديله أوامر وكدا.
وكمان بيخليك ت bypass الfirewall والأوامر بتبقي عباره عن انك ترفع ملفات تحمل ملفات وتحذف ملفات.

-------------------------------------------------------------------------------

![[Pasted image 20250201041547.png]]
في حاله انك وصلت للport فا عشان تاخد صلاحيات اعلي فا بيطلب منك user ,pass عشان تقدر تنفذ الاوامر وكدا.
ال user name ,password في الftp بيتنقلو في plain text file يعني مبيحصلش ليهم تشفير بشكل افتراضي فابالتالي بيفتح لينا سيناريو اتاك احنا عرفينه الهوا الMITM.

طبعا عملو حل للموضوع ده انهم بيستخدمو FTPS او SFTP الهما يعني عليهم طبقه الSSL/TLS الشهادات الاحنا عارفينها دي, فا بيشفر الملفات دي ويخلي الusername, password صعب التجسس عليهم او مستحيل.

-------------------------------------------------------------------------------

![[Pasted image 20250201042038.png]]

-------------------------------------------------------------------------------
![[Pasted image 20250201042115.png]]

الwebDAV بيبقي شغال مع بروتوكول الHTTP عشان يتحكم في الفايلات الرايحه والراجعه للويب.
هنتكلم اكتر عنها لما نيجي نتكلم عن الAPIوالIIS.

-------------------------------------------------------------------------------
![[Pasted image 20250201042419.png]]

-------------------------------------------------------------------------------
![[Pasted image 20250201043641.png]]
سيناريو brute force attack علي port ftp لو مفتوح وبتحمل ملف من علي النت اسمه rockyou.txt المهم الملف ده بيبقي فيه 14 مليون باسورد فا وارد يطلع واحد منهم والusername بيبقي ثابت معاك يا admin ياroot علي حسب بقا الscan بتاعك. ![[Pasted image 20250201043849.png]]

-------------------------------------------------------------------------------

![[Pasted image 20250201054009.png]]
تاني سيناريو الanonymous attack 
ساعتها بيبقي الusername : anonymous, password: anonymous.
وتقدر ساعتها بقا تعمل ls وتشوف الملفات وتعمل ابلود وكدا.
أمر  get بينزل الفولدرز من علي السيرفر في حين تواجدها.

-------------------------------------------------------------------------------
![[Pasted image 20250201055201.png]]
كتبته بالتفصيل ابقي ارجعله.

-------------------------------------------------------------------------------

![[Pasted image 20250201055316.png]]
ده اخطر سيناريو عشان ممكن يوصل لثغره الهيا RCE 
الهيا Remote code execution .
الهيا تنفيذ اوامر مباشرا علي السيرفر.
عشان كدا دي اخطر ثغره ممكن توصلها.

![[Pasted image 20250201055414.png]]


-------------------------------------------------------------------------------
![[Pasted image 20250201065419.png]]
سيناريو كمان الهوا  exploiting misconfiguration permissions.
انك تدور علي directory مدينها permission الwrite وتupload بقا الفايل بتاعك علي السيرفر.
او تحط backdoor عشان تعرف تخش علي السيرفر وقت ما تحب.
![[Pasted image 20250201065703.png]]
ده الأمر البيبقي موجود جوا ملف الphp.

![[Pasted image 20250201065845.png]]
في حاله بقا انك عرفت فعلا تحط الbackdoor فا ممكن بقا تنفذ الاوامر كدا في حاله انك كتبت كدا في الbrowser بتاعك.

-------------------------------------------------------------------------------
![[Pasted image 20250201074134.png]]
دلوقتي في الFTP الاحنا عارفينه انه بيبعت الfiles بين السيرفرات وبعضها 
فا عملو TFTP بروتوكول تاني فكرته بقا انه بيبعت الfiles بين السيرفر والclient .
الsecurity بتاعتو اقل عشان بيستخدم UDP مش TCP.
فا ده بردو معناه انه اسرع بس اقل امانا. 
وكلهم بيبقو شغالين علي نفس البورت الهوا 21.

![[Pasted image 20250201192624.png]]
![[Pasted image 20250201192650.png]]

ودي اوامر البتسخدمها في حاله اختراقك لل ftp.

![[Pasted image 20250201192724.png]]
وده لو عايز تحمل الftp سيرفر علي جهازك.
![[Pasted image 20250201192756.png]]
بعد ما تحمله تقدر تدخل علي الfile هنا وتعدل في لو حبيت.
![[Pasted image 20250201192821.png]]
![[Pasted image 20250201192929.png]]
![[Pasted image 20250201192935.png]]

الfile بيبقي فيه شويه خصائص كما هوا موضح.


-------------------------------------------------------------------------------

![[Pasted image 20250201192956.png]]

لو عايز تعرف الusers الموجوده علي سيرفر الFTP تقدر تستخدم الأمر ده.

-------------------------------------------------------------------------------
![[Pasted image 20250201193045.png]]
اوامر خطيره تجنب انك تفتحها علي سيرفر الFTP لو هتعمل واحد.

-------------------------------------------------------------------------------

زي ما شوفنا في السناريوهات مدام لقيت ال port 21 مفتوح فا بتدخل عليه ازاي وتجرب تشوف تقدر تعمل login ولا اي كدا.
![[Pasted image 20250201193240.png]]
![[Pasted image 20250201193302.png]]
وتعمل بقا الاوامر القولنا عليها.
![[Pasted image 20250201193328.png]]
![[Pasted image 20250201193401.png]]
لو جربت مثلا الdebug ولاقيته on دي كارثه المفروض ميبقاش on.
عشان دي بتتبع الاخطاء والاخطاء دي تفيدك انت ك هاكر عشان تجمع معلومات وهكذا.
![[Pasted image 20250201193456.png]]
نفس الكلام علي trace.
![[Pasted image 20250201193538.png]]
لازم بردو تتأكد ان دي مش مفتوحه عشان الanonymous حتي لو دخل ميقدرش يعدل علي الfile الهيرفعه ويخليه executable.


-------------------------------------------------------------------------------

![[Pasted image 20250201193714.png]]

دي طريقه تانيه للتسجيل في الport لو مفتوح عشان يدخل ينزلك كلل الملفات الموجوده علي السيرفر علي جهازك وممكن تعملها علي ايport تاني مش لازم الFTP يعني.
![[Pasted image 20250201193752.png]]
ده بيبقي الusername:password.
وده بيبقي حاجه اسمهها synchronization.

-------------------------------------------------------------------------------
![[Pasted image 20250201195647.png]]
upload files through touch command.
touch commands just make the file.
![[Pasted image 20250201195723.png]]
and put uploads it to the server.


-------------------------------------------------------------------------------
![[Pasted image 20250201195959.png]]
ودي بردو طرق تانيه عشان تسجل علي الport 21 وكلهم بيعملو نفس الحاجه فا مش فارقه اوي.
الاشهر والافضل انك تستخدم ال telnet.

ال <span style="color:rgb(112, 48, 160)">telnet</span> بيشتغل مع كل <span style="color:rgb(112, 48, 160)">المنافذ</span> مش <span style="color:rgb(112, 48, 160)">ftp </span>بس .

-------------------------------------------------------------------------------
![[Pasted image 20250201200417.png]]
لو ده حاصل هيقولك ممنوع توصل بالtelnet 
![[Pasted image 20250201200444.png]]
ساعتها بتضطر استخدم حاجه اسمها openssl.

-------------------------------------------------------------------------------
