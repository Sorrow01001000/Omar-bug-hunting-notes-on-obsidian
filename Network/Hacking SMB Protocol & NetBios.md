![[Pasted image 20250201231207.png]]
بروتوكول متخصص في نقل الفايلات والبيانات بين الاجهزه جوا الشبكه هما حاجات كتير بس المهم انهم في نفس الشبكه يعني.
فا فكرتك في الحوار انك تشوف البيانات البتتبعت وكدا وتحاول تخترقها.

الخدمه شغاله علي 3 ports الهما 445,137,139 ساعات بيسمو البرتوكول سامبا.
وفي الاغلب بيبقي شغال علي ويندوز الاكثر شيوعا يعني.

![[Pasted image 20250202020945.png]]
بيتسخدم الTCP.
![[Pasted image 20250202021119.png]]
samba 
ده البيشتغل علي حاجات غير الويندوز زي انظمه التلفونات وال linux.
![[Pasted image 20250202021256.png]]
![[Pasted image 20250202021423.png]]
![[Pasted image 20250202021439.png]]


-------------------------------------------------------------------------------
![[Pasted image 20250201231741.png]]
مثلا الواتس اب بيستخدم البروتوكول ده اكيد وفكرته انه بيعمل shared data center (shared disk)
 الهوا بيعدي عليه كل الرسايل وبعد كدا بيوجها لكل شخص وهكذا.


-------------------------------------------------------------------------------
![[Pasted image 20250202021534.png]]
لو عايز تعدل علي الconfiguration بتاعت الsamba فا بتلاقيها زي ما هوا موضح كدا فين.



-------------------------------------------------------------------------------
![[Pasted image 20250201231918.png]]
اول حاجه- انك تقدر تaccess واماكن انت ملكش صلاحيات انك توصلها فا ده يعتبر ثغره.
تاني حاجه- يبقي الversion قديم فا التشفير ال عليه يتكسر ويتم اختراق الملفات فا دي تعتبر ثغره.

![[Pasted image 20250201232553.png]]
تالت حاجه- في بعض الservices والطبيعي انك تلاقي admin, user والاتنين بيحتاجو password عشان تسجل
فا في بقا في services معينه ممكن تلاقي حاجه تالت وهيا الguest user وساعتها ده مش بيحتاج password عشان يسجل في حالت انك لاقيته فا ده يعتبر ثغره.

رابع حاجه- فيه vulnerabilities زي Eternal Blue ونقدر نستغلها عن طريق الmetasploit وال wanna cry .

خامس حاجه - وهي ال password policies بتبقي ضعيفه الهوا مش حاطط مثلا شروط للباسورد يبقي 
فا ممكن يحط مثلا 123 وده عبط في الطبيعي بيحددلك بيقولك مثلا لازم يبقي فيه حرف كابتل مثلا مش اقل من 8 حروف وهكذا.


![[Pasted image 20250202022054.png]]

في حاجه لو عرفت توصلها فا تقدر تدمر الشركه حرفيا وهوا لو عرفت توصل للملف الactive directory بتخزن فيها كل حاجه.

-------------------------------------------------------------------------------

![[Pasted image 20250201235334.png]]
فكره انك تعرف اسامي الفيلات في الشركه ودي المفروض غلط حاجه اسمها Enumeration.

ازاي بقا بتعمل الenumeration الادوات المستخدمه ومن اشهرهم ال Nmap.

بنكتب الأمر بتاعنا كالعاده عشان يscan علي الports بتاعتنا مفتوحه ولا اي 445و139و137.
وكمان بيشوف اي اليوزرس ال ليهم access بيحاول يعرفهم وكمان بنعمل أمر يشوف الfiles اساميهم لو هنعرف نوصلهم.

-------------------------------------------------------------------------------
![[Pasted image 20250202010015.png]]
الممكن يظهرلك حاجات الشكل ده.
لما تلاقي ال $ اعرف ان ده تبع الادمن ملكش دعوه بيهم عشان انا guest اصلا ومش معايا صلاحيات admin.
وهوا ده المفروض يطلعه أمر ال enum shares.

![[Pasted image 20250202010219.png]]
وده شكل الenumration بتاع الامر enum users.

-------------------------------------------------------------------------------
![[Pasted image 20250202010319.png]]
أمر تاني بيعمل نفس الحاجه.
وال -N انك بتقوله هخش منغير باسورد اي هوا المنغير باسورد الguest .

ولازم لازم قبل الip تحط \\\ .

-------------------------------------------------------------------------------

![[Pasted image 20250202011337.png]]
اداه كمان بتبقي موجوده في لينكس علطول
![[Pasted image 20250202011404.png]]
والناتج بتاعها شبه التاننين نوعا ما.


-------------------------------------------------------------------------------
![[Pasted image 20250202011844.png]]
في حاله بقا انك لاقيت file جوا ممكن تتطبق الأمر ده عشان تجرب تاخد نسخه من الملف وعادي ممكن مينفعش بس انت بتجرب.
![[Pasted image 20250202012840.png]]
امر بديل.

![[Pasted image 20250202012650.png]]
طريقه تانيه لو حبيت تنزل الملف 
![[Pasted image 20250202012705.png]]
مكان الbackup اسم الملف ال لاقيته وتحاول تنزله.

-------------------------------------------------------------------------------
![[Pasted image 20250202012912.png]]
سيناريو اخر لو عايز تسجل عن طريق الpassword فا بتعمل brute force.

بعد ما تجيب الباسورد بتبدي تشتغل بيه بقا.
![[Pasted image 20250202013002.png]]
هكذا.

-------------------------------------------------------------------------------
![[Pasted image 20250202013031.png]]
سيناريو كمان ال Eternal Blue. 
بيبقي الport مصاب بالCVE 143. 
وتقدر ساعتها تستخدم wanna cry by runsomeware ودي البتأدي انك تاخد Remote Code Execution.
الهيا اعلي ثغره في العالم عمتا.



![[Pasted image 20250202013330.png]]


بتبتدي تcheck عشان تعرف مصاب بال CVE 0143 ولا لا ساعتها هيقولك VULNERABLE.


![[Pasted image 20250202013446.png]]
بعد ما تعرف انه مصاب فا ساعتها بستخدم اداه metasploit هتلاقيها موجوده في اللينكس عادي وتعمل الاوامر زي ما هي مكتوبه فوق كدا.

![[Pasted image 20250202013531.png]]
![[Pasted image 20250202013604.png]]
هتلاقي نفسك اخدت shell وتقدر تكتب أوامر عن بعد لذلك الثغره دي خطيره جدا.

------------------------------------------------------------------------------
![[Pasted image 20250202022228.png]]
نوع اتاك تاني بتجربه لو جربت الsmbclient ومنفعش.

وفي الاتاك ده المفروض انك بتسجل ك anonymous مغير username,password.
اسم الاتاك RPC (Remote Procedure Call).
لو الموقع مصاب بال rpc ساعتها الاداه بتأدي شغلها بقا.
![[Pasted image 20250202022505.png]]
معناه الusername فاضي وكمان عتدوس كمان Enter عشان تسجل الpassword فاضي.


-------------------------------------------------------------------------------
![[Pasted image 20250202025814.png]]
اداه تانيه بردو بتعمل enumeration.
